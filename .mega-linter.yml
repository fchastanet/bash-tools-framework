---
# Configuration file for MegaLinter
# See all available variables at https://megalinter.io/latest/config-file/ and in linters documentation

APPLY_FIXES: all # all, none, or list of linter keys
# ENABLE: # If you use ENABLE variable, all other languages/formats/tooling-formats will be disabled by default
# ENABLE_LINTERS: # If you use ENABLE_LINTERS variable, all other linters will be disabled by default
DISABLE:
  - SQL
DISABLE_LINTERS:
  - JAVASCRIPT_ES
  - JAVASCRIPT_PRETTIER
  - RUBY_RUBOCOP
  - REPOSITORY_CHECKOV
  - REPOSITORY_TRIVY
  - REPOSITORY_KICS
  - SPELL_VALE
  - SPELL_LYCHEE
  - SPELL_PROSELINT
  - MARKDOWN_MARKDOWN_TABLE_FORMATTER
# DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect errors but not block CI to pass
EXCLUDED_DIRECTORIES:
  - '.history'
  - '.git'
  - '.idea'
  - 'logs'
  - 'node_modules'
  - 'vendor'
FILTER_REGEX_EXCLUDE: |
  (?x)(
    \.git/|
    \.history/|
    \.idea/|
    ^vendor/|
    ^node_modules/
  )
FILEIO_REPORTER: false
PRE_COMMANDS:
  - command: env
    cwd: 'workspace'
  - command: yarn add --dev eslint-plugin-json eslint-config-prettier
    cwd: 'workspace'
POST_COMMANDS:
  # FIX files set as root user
  # HOST_USER_ID and HOST_GROUP_ID set in package.json
  - command: |
      if [[ "{HOST_USER_ID:-0}" != "0" && "{HOST_GROUP_ID:-0}" != "0" ]]; then
        find . -user 0 -exec chown ${HOST_USER_ID}:${HOST_GROUP_ID} {} ';'
      fi
    cwd: 'workspace'

  # remove files generated by cspell
  - command: find . -name '*megalinter_file_names_cspell.txt' -delete
    cwd: 'workspace'

PRINT_ALPACA: false
SHOW_ELAPSED_TIME: true

# Linters configurations
BASH_SHELLCHECK_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^vendor/|
    /testsData/
  )
BASH_SHELLCHECK_ARGUMENTS: --source-path=/tmp/lint
BASH_SHFMT_ARGUMENTS: -i 2 -ci

REPOSITORY_SECRETLINT_CONFIG_FILE: .secretlintrc.yml

EDITORCONFIG_EDITORCONFIG_CHECKER_FILTER_REGEX_EXCLUDE: |
  (?x)(
    \.git/|
    /testsData/.*\.(txt|help)|
    ^manualTests/data/|
    ^src/Log/testsData|
    ^Gemfile.lock$|
    bin/bash-tpl|
    \.md$|
    ^.*-megalinter_file_names_cspell.txt|
    testsData/.*\.result$
  )

GIT_GIT_DIFF_PRE_COMMANDS:
  - command: git config --global core.autocrlf false
    continue_if_failed: false
  - command: git config --global core.eol lf
    continue_if_failed: false
  - command: git config --global core.whitespace cr-at-eol,-trailing-space
    continue_if_failed: false
  - command: git config --global core.excludesfile .gitignore
    continue_if_failed: false
  - command: git config --global apply.whitespace fix
    continue_if_failed: false
  - command: git config --global --add safe.directory .git
    continue_if_failed: false

IGNORE_GITIGNORED_FILES: true
IGNORE_GENERATED_FILES: true

JAVASCRIPT_DEFAULT_STYLE: prettier
JAVASCRIPT_ES_CONFIG_FILE: .eslintrc.js
JAVASCRIPT_ES_FILTER_REGEX_EXCLUDE: (report/)

JSON_ESLINT_PLUGIN_JSONC_FILE_NAME: .eslintrc.js

JSON_JSONLINT_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^\.vscode/settings\.json|
    ^conf/\.vscode/settings\.json|
    ^\.vscode/launch\.json
  )

SPELL_CSPELL_CONFIG_FILE: cspell.config.yml
SPELL_CSPELL_FILTER_REGEX_EXCLUDE: |
  (?x)(
    \.git/|
    ^\.history/|
    IDE/.*/\.idea|
    ^.*-megalinter_file_names_cspell.txt|
    ^megalinter-reports/|
    ^pages/Commands.md|
    ^pages/FrameworkFullDoc.md|
    ^pages/README.md|
    ^pages/doc|
    ^pages/bashDoc|
    ^pages/tests|
    ^commit-msg.md$|
    ^bin/bash-tpl|
    /testsData/|
    \.svg$
  )
SPELL_FILTER_REGEX_EXCLUDE: |
  (?x)(
    \.git/|
    \.history/|
    IDE/.*/\.idea|
    ^bin/bash-tpl|
    \.svg
  )

MARKDOWN_MARKDOWN_LINK_CHECK_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^pages/Commands.md|
    ^pages/FrameworkFullDoc.md|
    ^pages/README.md|
    ^pages/doc|
    ^pages/bashDoc|
    ^pages/tests|
    ^pages/_sidebar.md
  )

ACTION_ACTIONLINT_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^\.github/workflows/dependabot\.yml$
  )

YAML_V8R_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^\.vscode/\.checkov\.yml|
    ^\.github/workflows/dependabot\.yml$|
    ^\.secretlintrc\.yml|
    ^\.grype\.yaml
  )

MARKDOWN_MARKDOWNLINT_FILTER_REGEX_EXCLUDE: |
  (?x)(
    ^pages/Commands.md|
    ^pages/FrameworkFullDoc.md|
    ^pages/README.md|
    ^pages/doc|
    ^pages/bashDoc|
    ^pages/tests|
    ^doc/guides/Options/generate.*\.md$
  )
